import{r as y,H as s,a2 as P,am as D,al as E}from"./vendor-BGC5jbNJ.js";import{c as U,B as h}from"./index-XfiXpXpx.js";import{D as L,a as F,b as I,c as z,L as t,I as r}from"./dialog-BGyyJfu-.js";import{S as p,a as g,b as u,c as v,d as b}from"./select-DLgG1LiN.js";const R=y.forwardRef(({className:i,...x},j)=>s.jsx("textarea",{className:U("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",i),ref:j,...x}));R.displayName="Textarea";const A=["EUR/USD","GBP/USD","USD/JPY","USD/CHF","AUD/USD","USD/CAD","NZD/USD","EUR/GBP","EUR/JPY","GBP/JPY","EUR/AUD","EUR/CAD","EUR/CHF","AUD/JPY","CAD/JPY","XAU/USD","XAG/USD","US30","NAS100","SPX500"],B=["Asian","London","NewYork","Sydney"],V=["Scalping","DayTrading","Swing","Position"],Y=["Buy","Sell"];function W({open:i,onOpenChange:x,onSubmit:j,editTrade:a=null,settings:N,accounts:c=[],selectedAccountId:S=null}){const f=()=>({accountId:(a==null?void 0:a.accountId)||S||(c.length>0?c[0].id:""),ativo:(a==null?void 0:a.ativo)||"",tipo:(a==null?void 0:a.tipo)||"Win",resultado:(a==null?void 0:a.resultado)??"",session:(a==null?void 0:a.session)||"",strategy:(a==null?void 0:a.strategy)||"",direction:(a==null?void 0:a.direction)||"",entryPrice:(a==null?void 0:a.entryPrice)??"",exitPrice:(a==null?void 0:a.exitPrice)??"",lotSize:(a==null?void 0:a.lotSize)??(N==null?void 0:N.defaultLotSize)??"",stopLoss:(a==null?void 0:a.stopLoss)??"",takeProfit:(a==null?void 0:a.takeProfit)??"",pips:(a==null?void 0:a.pips)??"",riskRewardRatio:(a==null?void 0:a.riskRewardRatio)??"",notes:(a==null?void 0:a.notes)||"",tradeDate:(a==null?void 0:a.tradeDate)||new Date().toISOString().split("T")[0]}),[l,d]=y.useState(f);y.useEffect(()=>{i&&d(f())},[i,a,S,c]);const C=e=>{e.preventDefault();const n={...l,resultado:parseFloat(l.resultado)||0,entryPrice:l.entryPrice?parseFloat(l.entryPrice):void 0,exitPrice:l.exitPrice?parseFloat(l.exitPrice):void 0,lotSize:l.lotSize?parseFloat(l.lotSize):void 0,stopLoss:l.stopLoss?parseFloat(l.stopLoss):void 0,takeProfit:l.takeProfit?parseFloat(l.takeProfit):void 0,pips:l.pips?parseFloat(l.pips):void 0,riskRewardRatio:l.riskRewardRatio?parseFloat(l.riskRewardRatio):void 0};j(n),x(!1)},o=(e,n)=>{d(m=>({...m,[e]:n}))},k=e=>{const n=parseFloat(e);let m="BreakEven";n>0?m="Win":n<0&&(m="Loss"),d(w=>({...w,resultado:e,tipo:m}))};return s.jsx(L,{open:i,onOpenChange:x,children:s.jsxs(F,{className:"bg-slate-900 border-slate-700 text-white max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(I,{children:s.jsx(z,{className:"text-xl font-bold flex items-center gap-2",children:a?"Editar Trade":"Novo Trade"})}),s.jsxs("form",{onSubmit:C,className:"space-y-6",children:[c.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Conta *"}),s.jsxs(p,{value:l.accountId,onValueChange:e=>o("accountId",e),children:[s.jsx(g,{className:"bg-slate-800 border-slate-700",children:s.jsx(u,{placeholder:"Selecione a conta"})}),s.jsx(v,{className:"bg-slate-800 border-slate-700 z-[9999]",children:c.map(e=>s.jsxs(b,{value:e.id,children:[e.name," (",e.currency,")"]},e.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Par de Moedas *"}),s.jsxs(p,{value:l.ativo,onValueChange:e=>o("ativo",e),children:[s.jsx(g,{className:"bg-slate-800 border-slate-700",children:s.jsx(u,{placeholder:"Selecione o par"})}),s.jsx(v,{className:"bg-slate-800 border-slate-700 z-[9999]",children:A.map(e=>s.jsx(b,{value:e,children:e},e))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Data *"}),s.jsx(r,{type:"date",value:l.tradeDate,onChange:e=>o("tradeDate",e.target.value),className:"bg-slate-800 border-slate-700"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Direção"}),s.jsx("div",{className:"flex gap-2",children:Y.map(e=>s.jsxs(h,{type:"button",variant:l.direction===e?"default":"outline",className:`flex-1 ${l.direction===e?e==="Buy"?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700":"bg-slate-800 border-slate-700 hover:bg-slate-700"}`,onClick:()=>o("direction",e),children:[e==="Buy"?s.jsx(P,{className:"w-4 h-4 mr-1"}):s.jsx(D,{className:"w-4 h-4 mr-1"}),e]},e))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Resultado ($) *"}),s.jsx(r,{type:"number",step:"0.01",value:l.resultado,onChange:e=>k(e.target.value),placeholder:"Ex: 150.00 ou -50.00",className:"bg-slate-800 border-slate-700"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Tipo"}),s.jsx("div",{className:"flex gap-2",children:[{value:"Win",label:"Win",icon:P,color:"emerald"},{value:"Loss",label:"Loss",icon:D,color:"red"},{value:"BreakEven",label:"Break Even",icon:E,color:"amber"}].map(e=>s.jsxs(h,{type:"button",variant:l.tipo===e.value?"default":"outline",className:`flex-1 ${l.tipo===e.value?`bg-${e.color}-600 hover:bg-${e.color}-700`:"bg-slate-800 border-slate-700 hover:bg-slate-700"}`,style:l.tipo===e.value?{backgroundColor:e.color==="emerald"?"#059669":e.color==="red"?"#dc2626":"#d97706"}:{},onClick:()=>o("tipo",e.value),children:[s.jsx(e.icon,{className:"w-4 h-4 mr-1"}),e.label]},e.value))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Sessão"}),s.jsxs(p,{value:l.session,onValueChange:e=>o("session",e),children:[s.jsx(g,{className:"bg-slate-800 border-slate-700",children:s.jsx(u,{placeholder:"Selecione a sessão"})}),s.jsx(v,{className:"bg-slate-800 border-slate-700 z-[9999]",children:B.map(e=>s.jsx(b,{value:e,children:e},e))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Estratégia"}),s.jsxs(p,{value:l.strategy,onValueChange:e=>o("strategy",e),children:[s.jsx(g,{className:"bg-slate-800 border-slate-700",children:s.jsx(u,{placeholder:"Selecione a estratégia"})}),s.jsx(v,{className:"bg-slate-800 border-slate-700 z-[9999]",children:V.map(e=>s.jsx(b,{value:e,children:e},e))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Preço de Entrada"}),s.jsx(r,{type:"number",step:"0.00001",value:l.entryPrice,onChange:e=>o("entryPrice",e.target.value),placeholder:"1.08500",className:"bg-slate-800 border-slate-700"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Preço de Saída"}),s.jsx(r,{type:"number",step:"0.00001",value:l.exitPrice,onChange:e=>o("exitPrice",e.target.value),placeholder:"1.08750",className:"bg-slate-800 border-slate-700"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Lote"}),s.jsx(r,{type:"number",step:"0.01",value:l.lotSize,onChange:e=>o("lotSize",e.target.value),placeholder:"0.10",className:"bg-slate-800 border-slate-700"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Stop Loss"}),s.jsx(r,{type:"number",step:"0.00001",value:l.stopLoss,onChange:e=>o("stopLoss",e.target.value),placeholder:"1.08400",className:"bg-slate-800 border-slate-700"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Take Profit"}),s.jsx(r,{type:"number",step:"0.00001",value:l.takeProfit,onChange:e=>o("takeProfit",e.target.value),placeholder:"1.08900",className:"bg-slate-800 border-slate-700"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Pips"}),s.jsx(r,{type:"number",step:"0.1",value:l.pips,onChange:e=>o("pips",e.target.value),placeholder:"25",className:"bg-slate-800 border-slate-700"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Risk:Reward"}),s.jsx(r,{type:"number",step:"0.1",value:l.riskRewardRatio,onChange:e=>o("riskRewardRatio",e.target.value),placeholder:"2.5",className:"bg-slate-800 border-slate-700"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(t,{className:"text-slate-300",children:"Observações"}),s.jsx(R,{value:l.notes,onChange:e=>o("notes",e.target.value),placeholder:"Ex: Setup de reversão na zona de demanda...",className:"bg-slate-800 border-slate-700 min-h-[80px]"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(h,{type:"button",variant:"outline",className:"flex-1 bg-slate-800 border-slate-700 hover:bg-slate-700",onClick:()=>x(!1),children:"Cancelar"}),s.jsx(h,{type:"submit",className:"flex-1 bg-emerald-600 hover:bg-emerald-700",disabled:!l.ativo||l.resultado===""||c.length>0&&!l.accountId,children:a?"Salvar Alterações":"Adicionar Trade"})]})]})]})})}export{W as default};
