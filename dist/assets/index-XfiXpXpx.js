const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MetricsGrid-C5Nk7nt7.js","assets/vendor-BGC5jbNJ.js","assets/EquityCurve-Dt9FQ-ak.js","assets/vendor_recharts-Do3zZf4L.js","assets/vendor_charts-Cp_GKM0P.js","assets/vendor_datefns-COO1Bk_c.js","assets/PLByDay-C55_M6m3.js","assets/WinsLossesChart-BoASIhRv.js","assets/SessionAnalysis-BM2ysCIM.js","assets/TradesList-CrNhzUmR.js","assets/badge-BP-qA9PZ.js","assets/TradeForm-DzStc_VR.js","assets/dialog-BGyyJfu-.js","assets/select-DLgG1LiN.js","assets/PairAnalysis-BPQAkmOP.js","assets/StrategyAnalysis-BlRweT2t.js","assets/AccountSelector-udYvlyiZ.js","assets/AccountForm-BnAPStUl.js","assets/AccountsList-lhVFs9CR.js"])))=>i.map(i=>d[i]);
import{r,G as Xe,f as Ye,H as e,X as Ze,J as he,R as et,Q as tt,K as st,S as at,P as rt,L as pe,M as ot,T as nt,N as ge,O as be,U as ve,V as je,W as it,Y as ye,Z as Ne,_ as we,$ as Se,a0 as Te,a1 as le,a2 as lt,a3 as ce,a4 as _,a5 as ct,a6 as dt,a7 as ut,a8 as mt,a9 as xt,aa as Ce,ab as ft,ac as ht,ad as pt,ae as gt,af as te,ag as bt}from"./vendor-BGC5jbNJ.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();const vt=20,jt=1e6,D={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let se=0;function yt(){return se=(se+1)%Number.MAX_VALUE,se.toString()}const ae=new Map,de=t=>{if(ae.has(t))return;const s=setTimeout(()=>{ae.delete(t),K({type:D.REMOVE_TOAST,toastId:t})},jt);ae.set(t,s)},Nt=(t,s)=>{switch(s.type){case D.ADD_TOAST:return{...t,toasts:[s.toast,...t.toasts].slice(0,vt)};case D.UPDATE_TOAST:return{...t,toasts:t.toasts.map(a=>a.id===s.toast.id?{...a,...s.toast}:a)};case D.DISMISS_TOAST:{const{toastId:a}=s;return a?de(a):t.toasts.forEach(i=>{de(i.id)}),{...t,toasts:t.toasts.map(i=>i.id===a||a===void 0?{...i,open:!1}:i)}}case D.REMOVE_TOAST:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==s.toastId)}}},Y=[];let Z={toasts:[]};function K(t){Z=Nt(Z,t),Y.forEach(s=>{s(Z)})}function wt({...t}){const s=yt(),a=o=>K({type:D.UPDATE_TOAST,toast:{...o,id:s}}),i=()=>K({type:D.DISMISS_TOAST,toastId:s});return K({type:D.ADD_TOAST,toast:{...t,id:s,open:!0,onOpenChange:o=>{o||i()}}}),{id:s,dismiss:i,update:a}}function St(){const[t,s]=r.useState(Z);return r.useEffect(()=>(Y.push(s),()=>{const a=Y.indexOf(s);a>-1&&Y.splice(a,1)}),[t]),{...t,toast:wt,dismiss:a=>K({type:D.DISMISS_TOAST,toastId:a})}}function f(...t){return Xe(Ye(t))}const Ae=r.forwardRef(({...t},s)=>e.jsx("div",{ref:s,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...t}));Ae.displayName="ToastProvider";const _e=r.forwardRef(({...t},s)=>e.jsx("div",{ref:s,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...t}));_e.displayName="ToastViewport";const Tt=he("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ee=r.forwardRef(({className:t,variant:s,...a},i)=>e.jsx("div",{ref:i,className:f(Tt({variant:s}),t),...a}));Ee.displayName="Toast";const Ct=r.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:f("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));Ct.displayName="ToastAction";const ke=r.forwardRef(({className:t,...s},a)=>e.jsx("button",{ref:a,className:f("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(Ze,{className:"h-4 w-4"})}));ke.displayName="ToastClose";const De=r.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:f("text-sm font-semibold",t),...s}));De.displayName="ToastTitle";const Oe=r.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:f("text-sm opacity-90",t),...s}));Oe.displayName="ToastDescription";function At(){const{toasts:t}=St();return e.jsxs(Ae,{children:[t.map(function({id:s,title:a,description:i,action:o,...c}){return e.jsxs(Ee,{...c,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(De,{children:a}),i&&e.jsx(Oe,{children:i})]}),o,e.jsx(ke,{})]},s)}),e.jsx(_e,{})]})}class _t extends et.Component{constructor(s){super(s),this.state={error:null,info:null}}static getDerivedStateFromError(s){return{error:s}}componentDidCatch(s,a){this.setState({error:s,info:a}),console.error(s,a)}render(){return this.state.error?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-white p-6",children:e.jsxs("div",{className:"max-w-2xl w-full bg-slate-900 border border-slate-700 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Algo deu errado"}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"O aplicativo encontrou um erro. Você pode recarregar a página ou copiar o erro abaixo para suporte."}),e.jsx("pre",{className:"text-xs bg-slate-800 p-3 rounded overflow-auto max-h-40",children:String(this.state.error)}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{className:"bg-emerald-600 px-3 py-2 rounded",onClick:()=>window.location.reload(),children:"Recarregar"}),e.jsx("button",{className:"bg-slate-700 px-3 py-2 rounded",onClick:()=>{var a;const s=String(this.state.error)+`
`+(((a=this.state.info)==null?void 0:a.componentStack)||"");navigator.clipboard&&navigator.clipboard.writeText(s)},children:"Copiar erro"})]})]})}):this.props.children}}const Et=new tt({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}}),kt="https://trcqonhkqtejkshylusj.supabase.co",Dt="sb_publishable_M7T054p4gVlctwQsJHmE3Q_vGTdg8O-",C=st(kt,Dt),Pe=r.createContext(),Ot=({children:t})=>{const[s,a]=r.useState(null),[i,o]=r.useState(!1),[c,l]=r.useState(!0),[m,g]=r.useState(null);r.useEffect(()=>{h();const{data:{subscription:d}}=C.auth.onAuthStateChange((b,u)=>{u!=null&&u.user?(a(u.user),o(!0)):(a(null),o(!1))});return()=>d==null?void 0:d.unsubscribe()},[]);const h=async()=>{try{l(!0);const{data:{session:d},error:b}=await C.auth.getSession();if(b)throw b;d!=null&&d.user?(a(d.user),o(!0)):(a(null),o(!1)),l(!1)}catch(d){console.error("Auth state check failed:",d),g({type:"auth_error",message:d.message||"Failed to check authentication"}),l(!1)}},j=async(d,b)=>{try{l(!0);const{data:u,error:T}=await C.auth.signUp({email:d,password:b});if(T)throw T;return{data:u}}catch(u){throw u}finally{l(!1)}},p=async(d,b)=>{try{l(!0);const{data:u,error:T}=await C.auth.signInWithPassword({email:d,password:b});if(T)throw T;return a((u==null?void 0:u.user)||null),o(!!(u!=null&&u.user)),{data:u}}catch(u){throw u}finally{l(!1)}},v=async d=>{try{l(!0);const{data:b,error:u}=await C.auth.signInWithOtp({email:d});if(u)throw u;return{data:b}}catch(b){throw b}finally{l(!1)}},O=async d=>{try{const b=d||(s==null?void 0:s.id);if(!b)return null;const{data:u,error:T}=await C.from("profiles").select("*").eq("id",b).single();return T?null:u}catch{return null}},M=async()=>{try{const{error:d}=await C.auth.signOut();if(d)throw d;a(null),o(!1)}catch(d){console.error("Logout failed:",d),g({type:"logout_error",message:d.message||"Failed to logout"})}};return e.jsx(Pe.Provider,{value:{user:s,isAuthenticated:i,isLoadingAuth:c,authError:m,logout:M,checkAuthState:h,signUp:j,signIn:p,signInWithMagicLink:v,getUserProfile:O},children:t})},U=()=>{const t=r.useContext(Pe);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Pt="modulepreload",Lt=function(t){return"/"+t},ue={},S=function(s,a,i){let o=Promise.resolve();if(a&&a.length>0){let l=function(h){return Promise.all(h.map(j=>Promise.resolve(j).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),g=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));o=l(a.map(h=>{if(h=Lt(h),h in ue)return;ue[h]=!0;const j=h.endsWith(".css"),p=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const v=document.createElement("link");if(v.rel=j?"stylesheet":Pt,j||(v.as="script"),v.crossOrigin="",v.href=h,g&&v.setAttribute("nonce",g),document.head.appendChild(v),j)return new Promise((O,M)=>{v.addEventListener("load",O),v.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(l){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=l,window.dispatchEvent(m),!m.defaultPrevented)throw l}return o.then(l=>{for(const m of l||[])m.status==="rejected"&&c(m.reason);return s().catch(c)})},q=r.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:f("rounded-xl border bg-card text-card-foreground shadow",t),...s}));q.displayName="Card";const $=r.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:f("flex flex-col space-y-1.5 p-6",t),...s}));$.displayName="CardHeader";const W=r.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:f("font-semibold leading-none tracking-tight",t),...s}));W.displayName="CardTitle";const Rt=r.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:f("text-sm text-muted-foreground",t),...s}));Rt.displayName="CardDescription";const F=r.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:f("p-6 pt-0",t),...s}));F.displayName="CardContent";const It=r.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:f("flex items-center p-6 pt-0",t),...s}));It.displayName="CardFooter";const re=r.createContext(null);function zt({defaultValue:t=void 0,value:s,onValueChange:a,children:i,className:o=""}){const[c,l]=r.useState(t),m=s!==void 0?s:c,g=h=>{typeof a=="function"?a(h):l(h)};return e.jsx(re.Provider,{value:{value:m,setValue:g},children:e.jsx("div",{className:o,children:i})})}function Vt({children:t,className:s=""}){return e.jsx("div",{className:`flex gap-2 border-b pb-2 ${s}`,children:t})}function J({value:t,children:s,className:a=""}){const{value:i,setValue:o}=r.useContext(re),c=i===t;return e.jsx("button",{onClick:()=>o(t),className:`${a} px-4 py-2 rounded-xl text-sm font-medium transition
        ${c?"bg-primary text-white":"bg-muted text-muted-foreground hover:bg-muted/70"}`,children:s})}function X({value:t,children:s,className:a=""}){const{value:i}=r.useContext(re);return i!==t?null:e.jsx("div",{className:`mt-4 ${a}`,children:s})}const oe=he("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),L=r.forwardRef(({className:t,variant:s,size:a,asChild:i=!1,...o},c)=>{const l=i?at:"button";return e.jsx(l,{className:f(oe({variant:s,size:a,className:t})),ref:c,...o})});L.displayName="Button";const qt=ot,Ft=nt,Le=r.forwardRef(({className:t,align:s="center",sideOffset:a=4,...i},o)=>e.jsx(rt,{children:e.jsx(pe,{ref:o,align:s,sideOffset:a,className:f("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})}));Le.displayName=pe.displayName;const Re=r.forwardRef(({className:t,...s},a)=>e.jsx(ge,{ref:a,className:f("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));Re.displayName=ge.displayName;const Ut=r.forwardRef(({className:t,...s},a)=>e.jsx(be,{ref:a,className:f("aspect-square h-full w-full",t),...s}));Ut.displayName=be.displayName;const Ie=r.forwardRef(({className:t,...s},a)=>e.jsx(ve,{ref:a,className:f("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));Ie.displayName=ve.displayName;const Mt=it,ze=r.forwardRef(({className:t,...s},a)=>e.jsx(je,{className:f("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a}));ze.displayName=je.displayName;const Bt=r.forwardRef(({className:t,...s},a)=>e.jsxs(Mt,{children:[e.jsx(ze,{}),e.jsx(ye,{ref:a,className:f("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));Bt.displayName=ye.displayName;const $t=r.forwardRef(({className:t,...s},a)=>e.jsx(Ne,{ref:a,className:f("text-lg font-semibold",t),...s}));$t.displayName=Ne.displayName;const Wt=r.forwardRef(({className:t,...s},a)=>e.jsx(we,{ref:a,className:f("text-sm text-muted-foreground",t),...s}));Wt.displayName=we.displayName;const Kt=r.forwardRef(({className:t,...s},a)=>e.jsx(Se,{ref:a,className:f(oe(),t),...s}));Kt.displayName=Se.displayName;const Qt=r.forwardRef(({className:t,...s},a)=>e.jsx(Te,{ref:a,className:f(oe({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));Qt.displayName=Te.displayName;const Gt=r.lazy(()=>S(()=>import("./MetricsGrid-C5Nk7nt7.js"),__vite__mapDeps([0,1]))),Ht=r.lazy(()=>S(()=>import("./EquityCurve-Dt9FQ-ak.js"),__vite__mapDeps([2,1,3,4,5]))),Jt=r.lazy(()=>S(()=>import("./PLByDay-C55_M6m3.js"),__vite__mapDeps([6,1,3,4]))),Xt=r.lazy(()=>S(()=>import("./WinsLossesChart-BoASIhRv.js"),__vite__mapDeps([7,1,3,4]))),Yt=r.lazy(()=>S(()=>import("./SessionAnalysis-BM2ysCIM.js"),__vite__mapDeps([8,1,3,4]))),Zt=r.lazy(()=>S(()=>import("./TradesList-CrNhzUmR.js"),__vite__mapDeps([9,1,10,5]))),es=r.lazy(()=>S(()=>import("./TradeForm-DzStc_VR.js"),__vite__mapDeps([11,1,12,13]))),ts=r.lazy(()=>S(()=>import("./PairAnalysis-BPQAkmOP.js"),__vite__mapDeps([14,1]))),ss=r.lazy(()=>S(()=>import("./StrategyAnalysis-BlRweT2t.js"),__vite__mapDeps([15,1]))),as=r.lazy(()=>S(()=>import("./AccountSelector-udYvlyiZ.js"),__vite__mapDeps([16,1,13]))),rs=r.lazy(()=>S(()=>import("./AccountForm-BnAPStUl.js"),__vite__mapDeps([17,1,12,13])));r.lazy(()=>S(()=>import("./AccountsList-lhVFs9CR.js"),__vite__mapDeps([18,1,10])));function os(){const{user:t}=U(),[s,a]=r.useState("dashboard"),[i,o]=r.useState(!1),[c,l]=r.useState(!1),[m,g]=r.useState(null),[h,j]=r.useState(null),[p,v]=r.useState("all"),[O,M]=r.useState(""),[d,b]=r.useState(""),[u,T]=r.useState(""),{data:R=[],refetch:Ue,isLoading:Me}=le({queryKey:["accounts",t==null?void 0:t.id],queryFn:async()=>{if(!(t!=null&&t.id))return[];const{data:n,error:x}=await C.from("accounts").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});return x?[]:n||[]},enabled:!!(t!=null&&t.id)}),{data:ee=[],refetch:Be,isLoading:$e}=le({queryKey:["trades",t==null?void 0:t.id],queryFn:async()=>{if(!(t!=null&&t.id))return[];const{data:n,error:x}=await C.from("trades").select("*").eq("user_id",t.id).order("trade_date",{ascending:!1});return x?[]:n||[]},enabled:!!(t!=null&&t.id)}),ne=r.useMemo(()=>p==="all"?ee:ee.filter(n=>n.account_id===p),[ee,p]),A=r.useMemo(()=>{let n=ne;if(d&&u){const N=new Date(d),E=new Date(u);n=n.filter(w=>{const k=new Date((w.tradeDate||w.trade_date||w.trade_date_local||"").toString());return k>=N&&k<=E})}if(!O)return n;const x=O.trim().toLowerCase();return n.filter(N=>{const E=(N.ativo||N.pair||"").toString().toLowerCase(),w=(N.strategy||"").toString().toLowerCase(),k=(N.session||"").toString().toLowerCase();return E.includes(x)||w.includes(x)||k.includes(x)})},[ne,O,d,u]),Q=r.useMemo(()=>{var n;return p==="all"?{balance:R.reduce((x,N)=>x+(N.balance||0),0),currency:((n=R[0])==null?void 0:n.currency)||"USD"}:R.find(x=>x.id===p)||null},[R,p]),We=[{id:1,days:"segunda-terca-quarta-quinta-sexta",label:"semana 1 %"},{id:2,days:"segunda-terca-quarta-quinta-sexta",label:"semana 2 %"},{id:3,days:"segunda-terca-quarta-quinta-sexta",label:"semana 3 %"},{id:4,days:"segunda-terca-quarta-quinta-sexta",label:"semana 4 %"}],Ke=async n=>{const{error:x}=await C.from("accounts").insert([{user_id:t.id,name:n.name,balance:n.accountBalance,broker:n.broker||"",currency:n.currency||"USD",color:n.color||"#10b981"}]);x||(_.success("Conta criada!"),Ue(),l(!1))},Qe=async n=>{const{error:x}=await C.from("trades").insert([{user_id:t.id,account_id:n.accountId,pair:n.ativo,direction:n.direction.toLowerCase(),lot:n.lotSize,entry_price:n.entryPrice,exit_price:n.exitPrice,profit:n.resultado,result:n.tipo.toLowerCase(),trade_date:n.tradeDate,notes:n.notes||""}]);x||(_.success("Trade adicionado!"),Be(),o(!1))};return Me||$e?e.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsxs(zt,{value:s,onValueChange:a,className:"space-y-6",children:[e.jsxs("header",{className:"sticky top-0 z-50 backdrop-blur-xl bg-slate-900/80 border-b border-slate-800",children:[e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-emerald-600 shadow-lg shadow-emerald-500/20",children:e.jsx(lt,{className:"w-6 h-6 text-white"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-bold text-white",children:"Trading Journal"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"w-48 h-10 bg-slate-900/40 rounded-md"}),children:e.jsx(as,{accounts:R,selectedAccountId:p,onSelect:v})}),e.jsxs(L,{size:"sm",className:"flex items-center gap-2 bg-gradient-to-br from-slate-800/80 to-slate-800/60 border border-slate-700 text-emerald-300 hover:from-slate-700 hover:to-slate-700 px-3 py-2 rounded-md shadow-sm",onClick:()=>l(!0),children:[e.jsx(ce,{className:"w-4 h-4"}),"Adicionar Conta"]}),e.jsxs(L,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-700",onClick:()=>{g(null),o(!0)},children:[e.jsx(ce,{className:"w-4 h-4 mr-2"})," Novo Trade"]}),e.jsx(L,{size:"sm",className:"bg-slate-700 text-slate-200 hover:bg-slate-600",onClick:()=>{try{const n=A||[];if(!n.length){_("Nenhum trade para exportar");return}const x=Object.keys(n[0]),N=[x.join(",")].concat(n.map(I=>x.map(z=>`"${I[z]===null||I[z]===void 0?"":String(I[z]).replace(/"/g,'""')}"`).join(","))).join(`
`),E=new Blob([N],{type:"text/csv;charset=utf-8;"}),w=document.createElement("a"),k=URL.createObjectURL(E);w.setAttribute("href",k),w.setAttribute("download",`trades-export-${new Date().toISOString().replace(/[:.]/g,"-")}.csv`),document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(k)}catch(n){console.error(n),_.error("Erro ao exportar trades")}},children:"Exportar CSV"})]})]}),e.jsx("div",{className:"bg-slate-800/60 border-t border-slate-700",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center gap-4",children:[e.jsxs(Vt,{className:"flex gap-6 bg-transparent border-0 p-0",children:[e.jsxs(J,{value:"dashboard",className:"flex items-center gap-2 text-slate-200 hover:text-white",children:[e.jsx(ct,{className:"w-4 h-4"}),"Dashboard"]}),e.jsxs(J,{value:"charts",className:"flex items-center gap-2 text-slate-200 hover:text-white",children:[e.jsx(dt,{className:"w-4 h-4"}),"Gráficos"]}),e.jsxs(J,{value:"trades",className:"flex items-center gap-2 text-slate-200 hover:text-white",children:[e.jsx(ut,{className:"w-4 h-4"}),"Trades"]}),e.jsxs(J,{value:"analytics",className:"flex items-center gap-2 text-slate-200 hover:text-white",children:[e.jsx(mt,{className:"w-4 h-4"}),"Analytics"]})]}),e.jsx("div",{className:"ml-4 flex-1 flex items-center",children:e.jsx("input",{"aria-label":"Buscar trades",value:O,onChange:n=>M(n.target.value),placeholder:"Buscar por par, sessão ou estratégia...",className:"w-full max-w-lg h-10 px-3 bg-slate-900/40 border border-slate-700 rounded-md text-slate-200 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-600"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:d,onChange:n=>b(n.target.value),className:"h-10 px-2 bg-slate-900/40 border border-slate-700 rounded-md text-slate-200"}),e.jsx("input",{type:"date",value:u,onChange:n=>T(n.target.value),className:"h-10 px-2 bg-slate-900/40 border border-slate-700 rounded-md text-slate-200"}),e.jsx(L,{size:"sm",className:"bg-slate-700 text-slate-200",onClick:()=>{if(!d||!u){_.error("Escolha início e fim do período");return}_.success("Período aplicado")},children:"Aplicar"}),e.jsx(L,{size:"sm",className:"bg-slate-700 text-slate-200",onClick:()=>{b(""),T(""),_("Período removido")},children:"Limpar"})]})]})})]}),e.jsxs("main",{className:"container mx-auto px-4 py-6",children:[e.jsxs(X,{value:"dashboard",className:"space-y-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex flex-col gap-4",children:We.map(n=>e.jsxs("div",{className:"w-full rounded-2xl border border-slate-700 bg-gradient-to-br from-slate-800/50 to-slate-900/50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-slate-300 text-sm",children:n.days}),e.jsx("div",{className:"text-emerald-400 font-extrabold text-sm",children:n.label})]}),e.jsx("div",{className:"grid grid-cols-5 gap-3",children:["segunda","terca","quarta","quinta","sexta"].map((x,N)=>{const E=u?new Date(u):new Date,k=(5-E.getDay()+7)%7,I=new Date(E);I.setDate(E.getDate()+k-(n.id-1)*7);const z=new Date(I);z.setDate(I.getDate()-(4-N));const P=z.toISOString().split("T")[0],V=A.filter(y=>(y.tradeDate||y.trade_date||"").toString().startsWith(P)),G=V.reduce((y,H)=>y+(Number(H.resultado??H.profit??0)||0),0),Ge=V.length===0?"bg-slate-800":G>0?"bg-emerald-600":G<0?"bg-red-600":"bg-amber-600";return e.jsx("div",{className:"relative w-full",children:e.jsxs(qt,{children:[e.jsx(Ft,{asChild:!0,children:e.jsxs("button",{onClick:()=>{g({tradeDate:P}),o(!0)},title:P,className:`${Ge} text-white rounded-xl px-4 py-4 text-base h-24 flex flex-col items-center justify-center w-full`,children:[e.jsx("div",{className:"font-semibold",children:x.slice(0,3)}),e.jsx("div",{className:"text-xs mt-1",children:P})]})}),e.jsxs(Le,{className:"w-72",children:[e.jsxs("div",{className:"text-sm text-slate-200 font-medium",children:[x.charAt(0).toUpperCase()+x.slice(1)," — ",P]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:["Trades: ",V.length," • P&L: ",(G>=0?"+":"")+G.toFixed(2)]}),e.jsx("div",{className:"mt-3",children:V.length===0?e.jsx("div",{className:"text-sm text-slate-400",children:"Nenhum trade neste dia."}):e.jsx("ul",{className:"space-y-2 max-h-36 overflow-auto",children:V.slice(0,3).map((y,H)=>{var ie;const B=Number(y.resultado??y.profit??0)||0,He=B>0?"bg-emerald-600":B<0?"bg-red-600":"bg-amber-600",Je=(ie=((y.ativo||y.pair||"")+"").toString().split(/\W+/)[0])==null?void 0:ie.slice(0,2).toUpperCase();return e.jsxs("li",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Re,{className:"h-8 w-8",children:e.jsx(Ie,{className:`${He} text-white`,children:Je||"—"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-slate-200",children:y.ativo||y.pair||"—"}),e.jsx("span",{className:"text-xs text-slate-400",children:y.strategy||y.session||""})]})]}),e.jsx("div",{className:(B>=0?"text-emerald-400":"text-red-400")+" text-sm font-semibold",children:(B>=0?"+":"")+B.toFixed(2)})]},H)})})}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs(L,{size:"sm",className:"bg-slate-700 text-slate-200",onClick:()=>{a("trades"),b(P),T(P)},children:["Ver todos (",V.length,")"]}),e.jsx(L,{size:"sm",className:"bg-emerald-600",onClick:()=>{g({tradeDate:P}),o(!0)},children:"Adicionar"})]})]})]})},x)})})]},n.id))})}),e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"text-center text-slate-400 py-6",children:"Carregando métricas..."}),children:e.jsx(Gt,{trades:A,settings:Q})})]}),e.jsxs(X,{value:"charts",className:"space-y-6",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(q,{className:"bg-slate-800/50 border-slate-700",children:[e.jsx($,{children:e.jsx(W,{className:"text-white",children:"Equity Curve"})}),e.jsx(F,{children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"text-slate-400",children:"Carregando..."}),children:e.jsx(Ht,{trades:A,initialBalance:(Q==null?void 0:Q.balance)||0})})})]}),e.jsxs(q,{className:"bg-slate-800/50 border-slate-700",children:[e.jsx($,{children:e.jsx(W,{className:"text-white",children:"Distribuição W/L"})}),e.jsx(F,{children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"text-slate-400",children:"Carregando..."}),children:e.jsx(Xt,{trades:A})})})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(q,{className:"bg-slate-800/50 border-slate-700",children:[e.jsx($,{children:e.jsx(W,{className:"text-white",children:"P&L por Dia"})}),e.jsx(F,{children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"text-slate-400",children:"Carregando..."}),children:e.jsx(Jt,{trades:A})})})]}),e.jsxs(q,{className:"bg-slate-800/50 border-slate-700",children:[e.jsx($,{children:e.jsx(W,{className:"text-white",children:"Análise por Sessão"})}),e.jsx(F,{children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"text-slate-400",children:"Carregando..."}),children:e.jsx(Yt,{trades:A})})})]})]})]}),e.jsx(X,{value:"trades",className:"space-y-6",children:e.jsx(q,{className:"bg-slate-800/50 border-slate-700",children:e.jsx(F,{className:"p-0",children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"text-slate-400 p-6 text-center",children:"Carregando trades..."}),children:e.jsx(Zt,{trades:A,onEdit:g,accounts:R,onDelete:()=>{}})})})})}),e.jsx(X,{value:"analytics",className:"space-y-6",children:e.jsx("div",{className:"grid lg:grid-cols-2 gap-6",children:e.jsxs(r.Suspense,{fallback:e.jsx("div",{className:"text-slate-400",children:"Carregando analytics..."}),children:[e.jsx(ts,{trades:A}),e.jsx(ss,{trades:A})]})})})]})]}),i&&e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"text-slate-400 p-6",children:"Carregando formulário..."}),children:e.jsx(es,{open:i,onOpenChange:o,onSubmit:Qe,editTrade:m,accounts:R,settings:{defaultLotSize:.01}})}),c&&e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"text-slate-400 p-6",children:"Carregando formulário..."}),children:e.jsx(rs,{open:c,onOpenChange:l,onSubmit:Ke,editAccount:h})})]})}function ns({children:t}){return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("style",{children:`
        :root {
          --background: 222.2 84% 4.9%;
          --foreground: 210 40% 98%;
          --card: 222.2 84% 4.9%;
          --card-foreground: 210 40% 98%;
          --popover: 222.2 84% 4.9%;
          --popover-foreground: 210 40% 98%;
          --primary: 142.1 76.2% 36.3%;
          --primary-foreground: 355.7 100% 97.3%;
          --secondary: 217.2 32.6% 17.5%;
          --secondary-foreground: 210 40% 98%;
          --muted: 217.2 32.6% 17.5%;
          --muted-foreground: 215 20.2% 65.1%;
          --accent: 217.2 32.6% 17.5%;
          --accent-foreground: 210 40% 98%;
          --destructive: 0 62.8% 30.6%;
          --destructive-foreground: 210 40% 98%;
          --border: 217.2 32.6% 17.5%;
          --input: 217.2 32.6% 17.5%;
          --ring: 142.1 76.2% 36.3%;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
          width: 8px;
          height: 8px;
        }
        
        ::-webkit-scrollbar-track {
          background: #0f172a;
        }
        
        ::-webkit-scrollbar-thumb {
          background: #334155;
          border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
          background: #475569;
        }
        
        /* Smooth scrolling */
        html {
          scroll-behavior: smooth;
        }
        
        /* Selection color */
        ::selection {
          background: rgba(16, 185, 129, 0.3);
          color: white;
        }
      `}),t,e.jsx(xt,{position:"bottom-right",theme:"dark",toastOptions:{style:{background:"#1e293b",border:"1px solid #334155",color:"#f1f5f9"}}})]})}const is={Dashboard:os},Ve={mainPage:"Dashboard",Pages:is,Layout:ns};function ls(){const t=Ce(),{isAuthenticated:s}=U(),{Pages:a,mainPage:i}=Ve,o=i;return r.useEffect(()=>{const c=t.pathname;let l;if(c==="/"||c==="")l=o;else{const m=c.replace(/^\//,"").split("/")[0];l=Object.keys(a).find(j=>j.toLowerCase()===m.toLowerCase())||null}s&&l&&console.log("Navigated to:",l)},[t,s,a,o]),null}function cs({}){const t=Ce(),{user:s,isAuthenticated:a}=U(),i=t.pathname.substring(1);return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-slate-50",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-7xl font-light text-slate-300",children:"404"}),e.jsx("div",{className:"h-0.5 w-16 bg-slate-200 mx-auto"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h2",{className:"text-2xl font-medium text-slate-800",children:"Page Not Found"}),e.jsxs("p",{className:"text-slate-600 leading-relaxed",children:["The page ",e.jsxs("span",{className:"font-medium text-slate-700",children:['"',i,'"']})," could not be found in this application."]})]}),e.jsx("div",{className:"pt-6",children:e.jsxs("button",{onClick:()=>window.location.href="/",className:"inline-flex items-center px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 hover:border-slate-300 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Go Home"]})})]})})})}function ds(){const{signUp:t,signIn:s}=U(),[a,i]=r.useState(""),[o,c]=r.useState(""),[l,m]=r.useState(!1),[g,h]=r.useState(!1),j=async p=>{p.preventDefault(),m(!0);try{g?(await t(a,o),_.success("Cadastro realizado! Verifique seu e-mail se for o caso.")):(await s(a,o),_.success("Bem-vindo!"))}catch(v){_.error(v.message)}finally{m(!1)}};return e.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#020617",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",color:"white",fontFamily:"sans-serif"},children:e.jsxs("div",{style:{backgroundColor:"#0f172a",padding:"40px",borderRadius:"12px",border:"1px solid #1e293b",width:"100%",maxWidth:"400px"},children:[e.jsx("h1",{style:{color:"#10b981",textAlign:"center",fontSize:"24px",marginBottom:"10px"},children:g?"Criar Conta":"Trading Journal"}),e.jsx("p",{style:{color:"#94a3b8",textAlign:"center",fontSize:"14px",marginBottom:"30px"},children:g?"Comece a trackear seus trades":"Acesse sua conta"}),e.jsxs("form",{onSubmit:j,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"14px",marginBottom:"5px"},children:"E-mail"}),e.jsx("input",{type:"email",value:a,onChange:p=>i(p.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",backgroundColor:"#1e293b",border:"1px solid #334155",color:"white",boxSizing:"border-box"},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"14px",marginBottom:"5px"},children:"Senha"}),e.jsx("input",{type:"password",value:o,onChange:p=>c(p.target.value),style:{width:"100%",padding:"10px",borderRadius:"6px",backgroundColor:"#1e293b",border:"1px solid #334155",color:"white",boxSizing:"border-box"},required:!0})]}),e.jsx("button",{type:"submit",disabled:l,style:{width:"100%",padding:"12px",borderRadius:"6px",backgroundColor:"#059669",border:"none",color:"white",fontWeight:"bold",cursor:"pointer"},children:l?"Carregando...":g?"Cadastrar":"Entrar"})]}),e.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:e.jsx("button",{onClick:()=>h(!g),style:{background:"none",border:"none",color:"#10b981",cursor:"pointer",fontSize:"14px"},children:g?"Já tem conta? Entre aqui":"Não tem conta? Cadastre-se"})})]})})}function me({children:t}){const{isAuthenticated:s,isLoadingAuth:a}=U();return a?null:s?e.jsx(e.Fragment,{children:t}):e.jsx(ft,{to:"/",replace:!0})}const{Pages:qe,Layout:xe,mainPage:us}=Ve,Fe=us,ms=qe[Fe],fe=({children:t,currentPageName:s})=>xe?e.jsx(xe,{currentPageName:s,children:t}):e.jsx(e.Fragment,{children:t}),xs=()=>{const{isLoadingAuth:t,isAuthenticated:s}=U();return t?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-slate-950",children:e.jsx("div",{className:"w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin"})}):s?e.jsxs(gt,{children:[e.jsx(te,{path:"/",element:e.jsx(me,{children:e.jsx(fe,{currentPageName:Fe,children:e.jsx(ms,{})})})}),Object.entries(qe).map(([a,i])=>e.jsx(te,{path:`/${a}`,element:e.jsx(me,{children:e.jsx(fe,{currentPageName:a,children:e.jsx(i,{})})})},a)),e.jsx(te,{path:"*",element:e.jsx(cs,{})})]}):e.jsx(ds,{})};function fs(){return e.jsx(Ot,{children:e.jsxs(ht,{client:Et,children:[e.jsxs(pt,{children:[e.jsx(ls,{}),e.jsx(_t,{children:e.jsx(xs,{})})]}),e.jsx(At,{})]})})}bt.createRoot(document.getElementById("root")).render(e.jsx(fs,{}));export{L as B,q as C,f as c};
